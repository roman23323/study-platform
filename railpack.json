{
  "$schema": "https://schema.railpack.com",
  "steps": {
    "backend-install": {
      "commands": [
        "COPY:backend/package.json backend/package-lock.json backend/",
        "cd backend && npm ci"
      ]
    },
    "backend-build": {
      "inputs": [{ "step": "backend-install" }],
      "commands": [
        "COPY:backend/src backend/src",
        "COPY:backend/tsconfig.json backend/tsconfig.json",
        "cd backend && npm run build"
      ]
    }
  },
  "deploy": {
    "inputs": [
      { "step": "backend-build", "include": ["backend/dist"] },
      { "step": "backend-install", "include": ["backend/package.json", "backend/node_modules"] }
    ],
    "startCommand": "node backend/dist/index.js"
  }
}